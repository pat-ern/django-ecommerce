{% extends 'app/base.html' %}
{% load static %}

{% block titulo %}
<title>Producto</title>
{% endblock %}

{% block css %}
<link rel="stylesheet" href="{% static 'app/css/producto.css' %}">
{% endblock %}

{% block js %}
<script src="{% static 'app/js/producto.js' %}"></script> 
{% endblock %}

{% block contenido %}
{% load crispy_forms_tags %}
{% load humanize %}
<div class="container-fluid">
  <div class="row">
    <div class="fotos-producto col-12 col-md-6 col-lg-5">
      <div class="foto-producto text-dark m-2 p-2">
        <img src="{{ producto.imagen.url }}" class="card-img-top img-fluid" alt="...">
      </div>
    </div>
    <div class="container col-12 col-md-6 col-lg-7 mt-3">
      <h3 style="padding-top: 5px; font-weight: bold; color: #444444;">{{producto.nombre}}</h3>
      <hr>
      <h4>Descripción:</h4>
      <p class="descripcion-producto">{{producto.descripcion}}</p>
      <h3>${{producto.precio | intcomma }}</h3>
      <br>
      <button type="button" class="btn btn-lg">Añadir al carrito</button>
    </div>
  </div>
</div>
<hr>

<div class="d-grid gap-2 col text-center">
  <button type="button" class="btn bg-light btn-lg text-dark mostrar-comentarios" id="btn-toggle">Mostrar/Ocultar Comentarios</button>
</div>

<div class="container-fluid comentarios" id="div-comentarios">
  <div class="row">
    <div class="col-12 col-md-6 col-lg-7 mt-4">

          {% for c in comentarios %}
            <div class="card">
              <div class="card-header">
                {{c.usuario}}
              </div>
              <div class="card-body">
                <h5 class="card-title">
                  {% if c.puntuacion == 1%}
                    <img src="{% static 'app/img/rating-stars/1.jpg' %}" alt="" width="120" height="auto">
                  {% elif c.puntuacion == 2%}
                    <img src="{% static 'app/img/rating-stars/2.jpg' %}" alt="" width="120" height="auto">
                  {% elif c.puntuacion == 3%}
                    <img src="{% static 'app/img/rating-stars/3.jpg' %}" alt="" width="120" height="auto">
                  {% elif c.puntuacion == 4%}
                    <img src="{% static 'app/img/rating-stars/4.jpg' %}" alt="" width="120" height="auto">
                  {% elif c.puntuacion == 5%}
                    <img src="{% static 'app/img/rating-stars/5.jpg' %}" alt="" width="120" height="auto">
                  {% endif %}</h5>
                <p class="card-text">{{c.comentario}}</p>
              </div>
            </div>
            &nbsp;
          {% endfor%}
          
    </div>


    <div class="col-12 col-md-6 col-lg-5">


      <div class="card bg-light mt-4">
        <form class="form-group" id="commentForm" method="POST" action="">
          <div class="card-body">
            <div class="card-title">
              Comentar
            </div>
              {% csrf_token %}
              {{ form | crispy }}
            </div>
            <div class="d-flex justify-content-end me-3">
              <button type="reset" class="btn btn-primary mt-1" id="limpiar-btn">Limpiar</button>
              &nbsp;
              <button type="submit" class="btn btn-primary mt-1" id="enviar-btn">Enviar</button>
            </div>
        </form>
      </div>

    </div>
  </div>
</div>
{% endblock %}